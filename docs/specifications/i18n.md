# Internationalization (i18n) Specification

> Part of the [OxidGene Specifications](README.md).
> See also: [General](general.md) (§3.6 Interface Language) · [Settings](ui-settings.md) (date display, entry options) · [Architecture](architecture.md) · [Roadmap](roadmap.md) (EPIC D)

---

## 1. Overview

OxidGene supports runtime language switching with at least **English** and **French** in the MVP. The i18n system covers UI labels, date formatting, number formatting, and event type names. Content data (person names, notes, place names) is never translated.

---

## 2. Scope

### What is translated

| Category | Examples |
|---|---|
| **UI labels** | Button text, menu items, page titles, section headers, tooltips |
| **Form labels & placeholders** | "Surname", "First name", "Town, département, country…" |
| **Event type names** | "Birth", "Death", "Marriage" → "Naissance", "Décès", "Mariage" |
| **Enum display values** | Sex labels, NameType labels, ChildType labels, Confidence levels |
| **Date format patterns** | "dd/mm/yyyy", month names, "about", "before", "after" |
| **Error messages** | Validation errors, API error descriptions |
| **Empty states** | "No tree found", "No person found" |
| **Confirmation prompts** | "Delete this person?", "Discard changes?" |

### What is NOT translated

| Category | Reason |
|---|---|
| Person names, place names | User-entered content, locale-independent |
| Notes, source references | User-entered content |
| GEDCOM data | Standard format, not localized |
| CSS class names, API paths | Technical identifiers |

---

## 3. Language Selection

### Web version

- Language preference is stored **per user** (in user profile, post-MVP)
- In MVP (no auth): language preference stored in `localStorage`
- Default: browser's `navigator.language`, falling back to English

### Desktop version

- Language preference stored in **app settings** (local config file)
- Default: system locale, falling back to English

### Runtime switching

- Language can be changed at any time from the topbar user menu or app settings
- Switching is **instantaneous** — no page reload required
- All visible UI labels update immediately
- The selected language persists across sessions

---

## 4. Translation File Structure

Translations are organized as flat key-value maps in Rust, one module per language:

```
crates/oxidgene-ui/src/
  i18n/
    mod.rs          # Language enum, trait, current language signal
    en.rs           # English translations
    fr.rs           # French translations
```

### Key naming convention

Keys follow a hierarchical dot-separated pattern:

```
page.section.element
```

Examples:
```
home.title = "My Genealogy Trees"
home.toolbar.search_placeholder = "Search a tree…"
home.toolbar.new_tree = "+ New tree"
home.card.modified_ago = "Modified {time} ago"
tree.topbar.breadcrumb_trees = "My trees"
tree.sidebar.depth = "Depth"
person.edit.title = "Edit individual"
person.edit.civil_status = "Civil Status"
person.edit.birth = "Birth"
person.edit.death = "Death"
event.type.birth = "Birth"
event.type.death = "Death"
event.type.marriage = "Marriage"
confirm.delete_person.title = "Delete {name}?"
confirm.delete_person.message = "This will permanently remove this person..."
```

### Interpolation

Dynamic values use `{variable_name}` placeholders:

```
confirm.delete_person.title = "Delete {name}?"
home.subtitle = "{count} trees"
person.profile.age = "{years} years old"
```

### Pluralization

Plural forms use a `_one` / `_other` suffix convention:

```
home.subtitle_one = "{count} tree"
home.subtitle_other = "{count} trees"
```

French pluralization rule: `count == 0 || count == 1` → singular, else plural.

---

## 5. Date & Number Formatting

### Date display

Date formatting follows two independent settings:

1. **Display format** — chosen in [tree settings](ui-settings.md) §9: `dd/mm/yyyy`, `dd Mmm yyyy`, `Mmm yyyy`, `yyyy`
2. **Locale** — affects month names and date order

| Locale | Month example | Full date example |
|---|---|---|
| English | Jan, Feb, Mar… | 12 Mar 1842 |
| French | janv., févr., mars… | 12 mars 1842 |

### Date qualifiers

| Qualifier | English | French |
|---|---|---|
| Exact | (no prefix) | (no prefix) |
| About | c. | c. |
| Perhaps | ? | ? |
| Calculated | calc. | calc. |
| Before | before | avant |
| After | after | après |
| Between | between … and … | entre … et … |
| From–To | from … to … | de … à … |

### Number formatting

| Locale | Example |
|---|---|
| English | 1,234 |
| French | 1 234 (thin space) |

---

## 6. Event Type Labels

All EventType enum values have localized display names. The GEDCOM tag is locale-independent.

| EventType | English | French | GEDCOM tag |
|---|---|---|---|
| Birth | Birth | Naissance | BIRT |
| Death | Death | Décès | DEAT |
| Baptism | Baptism | Baptême | BAPM |
| Burial | Burial | Inhumation | BURI |
| Cremation | Cremation | Crémation | CREM |
| Graduation | Graduation | Diplôme | GRAD |
| Immigration | Immigration | Immigration | IMMI |
| Emigration | Emigration | Émigration | EMIG |
| Naturalization | Naturalization | Naturalisation | NATU |
| Census | Census | Recensement | CENS |
| Occupation | Occupation | Profession | OCCU |
| Residence | Residence | Résidence | RESI |
| Retirement | Retirement | Retraite | RETI |
| Will | Will | Testament | WILL |
| Probate | Probate | Homologation | PROB |
| Marriage | Marriage | Mariage | MARR |
| Divorce | Divorce | Divorce | DIV |
| Annulment | Annulment | Annulation | ANUL |
| Engagement | Engagement | Fiançailles | ENGA |
| MarriageBann | Marriage Bann | Bans de mariage | MARB |
| MarriageContract | Marriage Contract | Contrat de mariage | MARC |
| MarriageLicense | Marriage License | Licence de mariage | MARL |
| MarriageSettlement | Marriage Settlement | Convention matrimoniale | MARS |
| Other | Other | Autre | EVEN |

---

## 7. Adding a New Language

To add a new language:

1. Create a new file `crates/oxidgene-ui/src/i18n/{lang_code}.rs`
2. Implement the translation trait with all keys
3. Register the language in `mod.rs`
4. Add the language option to the user preferences UI

Missing keys fall back to **English** as the default language.

---

## 8. RTL Support (Future)

Right-to-left languages (Arabic, Hebrew) are not in scope for MVP. The architecture should not preclude future RTL support:
- Use logical CSS properties (`margin-inline-start` instead of `margin-left`) where practical
- Avoid hard-coded left/right positioning in layouts
